'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = server;

var _core = require('../lib/core.js');

var _core2 = _interopRequireDefault(_core);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// eslint-disable-line import/no-unresolved

function server(file, opt, cb) {
  // Load mod instance.
  var mod = void 0;

  try {
    mod = require(file); // eslint-disable-line global-require
  } catch (e) {
    cb(new Error(file + ' does not exist.'));
  }

  if (typeof mod.default !== 'function') {
    cb(new Error(file + ' does not export a default function.'));
  }

  var _opt$app = opt.app,
      port = _opt$app.port,
      host = _opt$app.host;

  (0, _core2.default)(mod, opt).listen(port, host, function (err) {
    if (err) {
      return cb(err.stack);
    }
    return cb(null);
  });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNtZFxcc2VydmVyLmpzIl0sIm5hbWVzIjpbInNlcnZlciIsImZpbGUiLCJvcHQiLCJjYiIsIm1vZCIsInJlcXVpcmUiLCJlIiwiRXJyb3IiLCJkZWZhdWx0IiwiYXBwIiwicG9ydCIsImhvc3QiLCJsaXN0ZW4iLCJlcnIiLCJzdGFjayJdLCJtYXBwaW5ncyI6Ijs7Ozs7a0JBRXdCQSxNOztBQUZ4Qjs7Ozs7O0FBQW1DOztBQUVwQixTQUFTQSxNQUFULENBQWdCQyxJQUFoQixFQUFzQkMsR0FBdEIsRUFBMkJDLEVBQTNCLEVBQStCO0FBQzVDO0FBQ0EsTUFBSUMsWUFBSjs7QUFFQSxNQUFJO0FBQ0ZBLFVBQU1DLFFBQVFKLElBQVIsQ0FBTixDQURFLENBQ29CO0FBQ3ZCLEdBRkQsQ0FFRSxPQUFPSyxDQUFQLEVBQVU7QUFDVkgsT0FBRyxJQUFJSSxLQUFKLENBQWFOLElBQWIsc0JBQUg7QUFDRDs7QUFFRCxNQUFJLE9BQU9HLElBQUlJLE9BQVgsS0FBdUIsVUFBM0IsRUFBdUM7QUFDckNMLE9BQUcsSUFBSUksS0FBSixDQUFhTixJQUFiLDBDQUFIO0FBQ0Q7O0FBWjJDLGlCQWNyQkMsSUFBSU8sR0FkaUI7QUFBQSxNQWNwQ0MsSUFkb0MsWUFjcENBLElBZG9DO0FBQUEsTUFjOUJDLElBZDhCLFlBYzlCQSxJQWQ4Qjs7QUFlNUMsc0JBQUlQLEdBQUosRUFBU0YsR0FBVCxFQUFjVSxNQUFkLENBQXFCRixJQUFyQixFQUEyQkMsSUFBM0IsRUFBaUMsVUFBQ0UsR0FBRCxFQUFTO0FBQ3hDLFFBQUlBLEdBQUosRUFBUztBQUNQLGFBQU9WLEdBQUdVLElBQUlDLEtBQVAsQ0FBUDtBQUNEO0FBQ0QsV0FBT1gsR0FBRyxJQUFILENBQVA7QUFDRCxHQUxEO0FBTUQiLCJmaWxlIjoiY21kXFxzZXJ2ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc3J2IGZyb20gJy4uL2xpYi9jb3JlLmpzJzsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgaW1wb3J0L25vLXVucmVzb2x2ZWRcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNlcnZlcihmaWxlLCBvcHQsIGNiKSB7XHJcbiAgLy8gTG9hZCBtb2QgaW5zdGFuY2UuXHJcbiAgbGV0IG1vZDtcclxuXHJcbiAgdHJ5IHtcclxuICAgIG1vZCA9IHJlcXVpcmUoZmlsZSk7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGdsb2JhbC1yZXF1aXJlXHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgY2IobmV3IEVycm9yKGAke2ZpbGV9IGRvZXMgbm90IGV4aXN0LmApKTtcclxuICB9XHJcblxyXG4gIGlmICh0eXBlb2YgbW9kLmRlZmF1bHQgIT09ICdmdW5jdGlvbicpIHtcclxuICAgIGNiKG5ldyBFcnJvcihgJHtmaWxlfSBkb2VzIG5vdCBleHBvcnQgYSBkZWZhdWx0IGZ1bmN0aW9uLmApKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHsgcG9ydCwgaG9zdCB9ID0gb3B0LmFwcDtcclxuICBzcnYobW9kLCBvcHQpLmxpc3Rlbihwb3J0LCBob3N0LCAoZXJyKSA9PiB7XHJcbiAgICBpZiAoZXJyKSB7XHJcbiAgICAgIHJldHVybiBjYihlcnIuc3RhY2spO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNiKG51bGwpO1xyXG4gIH0pO1xyXG59XHJcbiJdfQ==