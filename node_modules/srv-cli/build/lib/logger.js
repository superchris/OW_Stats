'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function (opt) {
  var logs = opt.logs || './logs';

  if (!_fs2.default.existsSync(logs)) {
    _fs2.default.mkdirSync(logs);
  }

  var logger = new _winston2.default.Logger({
    transports: [new _winston2.default.transports.File({
      level: 'info',
      filename: './' + logs + '/all-logs.log',
      handleExceptions: true,
      json: true,
      maxsize: 5242880, // 5MB
      maxFiles: 5,
      colorize: false
    }), new _winston2.default.transports.Console({
      level: 'debug',
      handleExceptions: true,
      json: false,
      colorize: true
    })],
    exitOnError: false
  });

  var stream = {
    write: function write(message) {
      logger.info(message);
    }
  };

  return {
    logger: logger,
    stream: stream
  };
};

var _fs = require('fs');

var _fs2 = _interopRequireDefault(_fs);

var _winston = require('winston');

var _winston2 = _interopRequireDefault(_winston);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2dlci5qcyJdLCJuYW1lcyI6WyJvcHQiLCJsb2dzIiwiZXhpc3RzU3luYyIsIm1rZGlyU3luYyIsImxvZ2dlciIsIkxvZ2dlciIsInRyYW5zcG9ydHMiLCJGaWxlIiwibGV2ZWwiLCJmaWxlbmFtZSIsImhhbmRsZUV4Y2VwdGlvbnMiLCJqc29uIiwibWF4c2l6ZSIsIm1heEZpbGVzIiwiY29sb3JpemUiLCJDb25zb2xlIiwiZXhpdE9uRXJyb3IiLCJzdHJlYW0iLCJ3cml0ZSIsIm1lc3NhZ2UiLCJpbmZvIl0sIm1hcHBpbmdzIjoiOzs7Ozs7a0JBR2UsVUFBVUEsR0FBVixFQUFlO0FBQzVCLE1BQU1DLE9BQU9ELElBQUlDLElBQUosSUFBWSxRQUF6Qjs7QUFFQSxNQUFJLENBQUMsYUFBR0MsVUFBSCxDQUFjRCxJQUFkLENBQUwsRUFBMEI7QUFDeEIsaUJBQUdFLFNBQUgsQ0FBYUYsSUFBYjtBQUNEOztBQUVELE1BQU1HLFNBQVMsSUFBSSxrQkFBUUMsTUFBWixDQUFtQjtBQUNoQ0MsZ0JBQVksQ0FDVixJQUFJLGtCQUFRQSxVQUFSLENBQW1CQyxJQUF2QixDQUE0QjtBQUMxQkMsYUFBTyxNQURtQjtBQUUxQkMsdUJBQWVSLElBQWYsa0JBRjBCO0FBRzFCUyx3QkFBa0IsSUFIUTtBQUkxQkMsWUFBTSxJQUpvQjtBQUsxQkMsZUFBUyxPQUxpQixFQUtSO0FBQ2xCQyxnQkFBVSxDQU5nQjtBQU8xQkMsZ0JBQVU7QUFQZ0IsS0FBNUIsQ0FEVSxFQVVWLElBQUksa0JBQVFSLFVBQVIsQ0FBbUJTLE9BQXZCLENBQStCO0FBQzdCUCxhQUFPLE9BRHNCO0FBRTdCRSx3QkFBa0IsSUFGVztBQUc3QkMsWUFBTSxLQUh1QjtBQUk3QkcsZ0JBQVU7QUFKbUIsS0FBL0IsQ0FWVSxDQURvQjtBQWtCaENFLGlCQUFhO0FBbEJtQixHQUFuQixDQUFmOztBQXFCQSxNQUFNQyxTQUFTO0FBQ2JDLFNBRGEsaUJBQ1BDLE9BRE8sRUFDRTtBQUNiZixhQUFPZ0IsSUFBUCxDQUFZRCxPQUFaO0FBQ0Q7QUFIWSxHQUFmOztBQU1BLFNBQU87QUFDTGYsa0JBREs7QUFFTGE7QUFGSyxHQUFQO0FBSUQsQzs7QUF6Q0Q7Ozs7QUFDQSIsImZpbGUiOiJsb2dnZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZnMgZnJvbSAnZnMnO1xyXG5pbXBvcnQgd2luc3RvbiBmcm9tICd3aW5zdG9uJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChvcHQpIHtcbiAgY29uc3QgbG9ncyA9IG9wdC5sb2dzIHx8ICcuL2xvZ3MnO1xuXHJcbiAgaWYgKCFmcy5leGlzdHNTeW5jKGxvZ3MpKSB7XHJcbiAgICBmcy5ta2RpclN5bmMobG9ncyk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBsb2dnZXIgPSBuZXcgd2luc3Rvbi5Mb2dnZXIoe1xyXG4gICAgdHJhbnNwb3J0czogW1xyXG4gICAgICBuZXcgd2luc3Rvbi50cmFuc3BvcnRzLkZpbGUoe1xyXG4gICAgICAgIGxldmVsOiAnaW5mbycsXHJcbiAgICAgICAgZmlsZW5hbWU6IGAuLyR7bG9nc30vYWxsLWxvZ3MubG9nYCxcclxuICAgICAgICBoYW5kbGVFeGNlcHRpb25zOiB0cnVlLFxyXG4gICAgICAgIGpzb246IHRydWUsXHJcbiAgICAgICAgbWF4c2l6ZTogNTI0Mjg4MCwgLy8gNU1CXHJcbiAgICAgICAgbWF4RmlsZXM6IDUsXHJcbiAgICAgICAgY29sb3JpemU6IGZhbHNlLFxyXG4gICAgICB9KSxcclxuICAgICAgbmV3IHdpbnN0b24udHJhbnNwb3J0cy5Db25zb2xlKHtcclxuICAgICAgICBsZXZlbDogJ2RlYnVnJyxcclxuICAgICAgICBoYW5kbGVFeGNlcHRpb25zOiB0cnVlLFxyXG4gICAgICAgIGpzb246IGZhbHNlLFxyXG4gICAgICAgIGNvbG9yaXplOiB0cnVlLFxyXG4gICAgICB9KSxcclxuICAgIF0sXHJcbiAgICBleGl0T25FcnJvcjogZmFsc2UsXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHN0cmVhbSA9IHtcclxuICAgIHdyaXRlKG1lc3NhZ2UpIHtcclxuICAgICAgbG9nZ2VyLmluZm8obWVzc2FnZSk7XHJcbiAgICB9LFxyXG4gIH07XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBsb2dnZXIsXHJcbiAgICBzdHJlYW0sXHJcbiAgfTtcclxufVxyXG4iXX0=