'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function (opt) {
  var whitelist = opt.allowedOrigins || [];

  var config = {
    origin: function origin(_origin, callback) {
      // If whitelist config is empty, allow all CORS requests.
      if (whitelist.length === 0) {
        return callback(null, true);
      }

      var originIsWhitelisted = whitelist.indexOf(_origin) !== -1;
      return callback(null, originIsWhitelisted);
    }
  };

  return {
    cors: (0, _cors2.default)(config)
  };
};

var _cors = require('cors');

var _cors2 = _interopRequireDefault(_cors);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcnMuanMiXSwibmFtZXMiOlsib3B0Iiwid2hpdGVsaXN0IiwiYWxsb3dlZE9yaWdpbnMiLCJjb25maWciLCJvcmlnaW4iLCJjYWxsYmFjayIsImxlbmd0aCIsIm9yaWdpbklzV2hpdGVsaXN0ZWQiLCJpbmRleE9mIiwiY29ycyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O2tCQU1lLFVBQVVBLEdBQVYsRUFBZTtBQUM1QixNQUFNQyxZQUFZRCxJQUFJRSxjQUFKLElBQXNCLEVBQXhDOztBQUVBLE1BQU1DLFNBQVM7QUFFYkMsVUFGYSxrQkFFTkEsT0FGTSxFQUVFQyxRQUZGLEVBRVk7QUFDdkI7QUFDQSxVQUFJSixVQUFVSyxNQUFWLEtBQXFCLENBQXpCLEVBQTRCO0FBQzFCLGVBQU9ELFNBQVMsSUFBVCxFQUFlLElBQWYsQ0FBUDtBQUNEOztBQUVELFVBQU1FLHNCQUFzQk4sVUFBVU8sT0FBVixDQUFrQkosT0FBbEIsTUFBOEIsQ0FBQyxDQUEzRDtBQUNBLGFBQU9DLFNBQVMsSUFBVCxFQUFlRSxtQkFBZixDQUFQO0FBQ0Q7QUFWWSxHQUFmOztBQWFBLFNBQU87QUFDTEUsVUFBTSxvQkFBS04sTUFBTDtBQURELEdBQVA7QUFHRCxDOztBQXRCRCIsImZpbGUiOiJjb3JzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gU2V0cyAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJyBDT1JTIGhlYWRlciB0byBhbGxvdyB3aGl0ZWxpc3RlZFxyXG4vLyBkb21haW5zIHRvIGFjY2VzcyBBUEkuXHJcblxyXG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAob3B0KSB7XHJcbiAgY29uc3Qgd2hpdGVsaXN0ID0gb3B0LmFsbG93ZWRPcmlnaW5zIHx8IFtdO1xyXG5cclxuICBjb25zdCBjb25maWcgPSB7XHJcblxyXG4gICAgb3JpZ2luKG9yaWdpbiwgY2FsbGJhY2spIHtcclxuICAgICAgLy8gSWYgd2hpdGVsaXN0IGNvbmZpZyBpcyBlbXB0eSwgYWxsb3cgYWxsIENPUlMgcmVxdWVzdHMuXHJcbiAgICAgIGlmICh3aGl0ZWxpc3QubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHRydWUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBvcmlnaW5Jc1doaXRlbGlzdGVkID0gd2hpdGVsaXN0LmluZGV4T2Yob3JpZ2luKSAhPT0gLTE7XHJcbiAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBvcmlnaW5Jc1doaXRlbGlzdGVkKTtcclxuICAgIH0sXHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGNvcnM6IGNvcnMoY29uZmlnKSxcclxuICB9O1xyXG59XHJcbiJdfQ==